#!/bin/bash
#cat nirvana.log | grep High | grep HSI | grep $1[0-9][0-9][0-9] | cut -c80-10000
#echo "_______________________"


LOGFILE=/mnt/d/nir/nir9/nirvana.log

for j in "2013-04" "2013-05" "2013-06" "2013-07" "2013-08" "2013-09" "2013-10" "2013-11" "2013-12" "2014-01" "2014-02" "2014-03" "2014-04" "2014-05" "2014-06" "2014-07" "2014-08" "2014-09" "2014-10" "2014-11" "2014-12" "2015-01" "2015-02" "2015-03" "2015-04" "2015-05" "2015-06" "2015-07" "2015-08" "2015-09" "2015-10" "2015-11" "2015-12"
do
    echo "$j :"
    for i in 091 093 094 100 101 103 104 110 111 113 114 130 131 133 134 140 141 143 144 150 151 153 154 160
    do
        echo -n -e "$i\t"
        cat $LOGFILE  | grep $j | grep High | grep HSI | grep "$i[0-9][0-9][0-9]\ " | cut -c80-10000 | awk -F= '{print $3}' | tr -d ' ' | awk 'BEGIN{a=0; totnum=0}{if ($1>0) {a=a+$1; totnum++;}}END{print a/totnum}'
    done
done
